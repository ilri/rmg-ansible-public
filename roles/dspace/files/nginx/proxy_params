proxy_set_header Host $http_host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto $scheme;
# Protect against "HTTPoxy" vulnerability in server-side libraries
# See: https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
# See: https://httpoxy.org/
proxy_set_header Proxy "";
proxy_connect_timeout 3600;
proxy_send_timeout 3600;
proxy_read_timeout 3600;
# Use HTTP/1.1 to upstream so we can use keepalive and reduce connection overhead
# See: https://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive
# See: https://ma.ttias.be/enable-keepalive-connections-in-nginx-upstream-proxy-configurations/
proxy_http_version 1.1;
proxy_set_header Connection "";
